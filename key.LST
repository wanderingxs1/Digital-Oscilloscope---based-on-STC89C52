C51 COMPILER V9.00   KEY                                                                   04/20/2023 19:53:04 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE KEY
OBJECT MODULE PLACED IN key.OBJ
COMPILER INVOKED BY: D:\keil4\C51\BIN\C51.EXE key.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<key.h>
   2          
   3          extern char workMode;
   4          extern char key_num;
   5          extern char waveMode;
   6          extern char key_sta;
   7          sbit KEY1      = P3^4;
   8          sbit KEY2      = P3^5;
   9          
  10          unsigned char flag4=0;//按键4修改幅值还是频率，0幅值1相位
  11          
  12          void key_service()
  13            {
  14   1        if(key_sta&0x01) return;             // key_sta.0=1?????????????????￡???????????
  15   1         if(KEY2)                             //???μ???????
  16   1              {
  17   2          key_num=key_num+1;                  //????????????0-4???????м?????????1-8??  
  18   2              key_sta=key_sta|0x01;              // ??key_sta.0=1
  19   2              }
  20   1         else if(KEY1)
  21   1                {
  22   2                    key_num=key_num+5;   
  23   2                key_sta=key_sta|0x01;        // ??key_sta.0=1
  24   2                    }
  25   1        }
  26          
  27          void keyWork()
  28          {
  29   1              switch(key_num)
  30   1              {
  31   2              //123号按键改变工作模式
  32   2                  case 1:
  33   2                      workMode=key_num;
  34   2                  break;
  35   2                  case 2:
  36   2                      workMode=key_num;
  37   2                  break;
  38   2                  case 3:
  39   2                      workMode=key_num;
  40   2                  break;
  41   2              //4号按键改变工作模式1下，ch2输出信号的幅值/频率（flag4=0改幅值，flag4=1改相位）,按一次按键，下次的功能也
             -不同
  42   2                  case 4:
  43   2                      if(workMode==1){
  44   3                          if(flag4==0){
  45   4                              //修改幅值
  46   4                              flag4=1;
  47   4                              }
  48   3                          else{
  49   4                              //修改频率
  50   4                              flag4=0;
  51   4                          }
  52   3                      }
  53   2                  break;
  54   2      //5678号按键适用于在工作模式1下改变输出波形
C51 COMPILER V9.00   KEY                                                                   04/20/2023 19:53:04 PAGE 2   

  55   2                  case 5:
  56   2                      if(workMode==1){
  57   3                      waveMode=1;
  58   3                  }
  59   2              break;
  60   2              case 6:
  61   2                  if(workMode==1){
  62   3                      waveMode=2;
  63   3                  }
  64   2              break;
  65   2              case 7:
  66   2                  if(workMode==1){
  67   3                      waveMode=3;
  68   3                  }
  69   2              break;
  70   2              case 8:
  71   2                  if(workMode==1){
  72   3                      waveMode=4;
  73   3                  }
  74   2              break;
  75   2              default:
  76   2              break;
  77   2      
  78   2              }
  79   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    131    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
